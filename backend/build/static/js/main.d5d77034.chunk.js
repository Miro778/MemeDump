(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{214:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),s=n.n(c),i=(n(79),n(13)),o=n.n(i),l=n(19),u=n(12);function d(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}var j={getLikes:function(e,t){for(var n=0,r=0;r<t.length;r++)t[r].user.id===e.id&&(n+=t[r].likes);return n},getComments:function(e,t){for(var n=0,r=0;r<t.length;r++)for(var a=0;a<t[r].comments.length;a++)t[r].comments[a].user===e.username&&n++;return n},getRank:function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return n+1;return t.length-1},compareByLikes:function(e,t){return e.likes>t.likes?-1:e.likes<t.likes?1:0},compareByDate:function(e,t){var n=d(e.date),r=d(t.date);return n.getTime()>r.getTime()?-1:n.getTime()<r.getTime()?1:0}},b=n(41),h=n(285),m=n(289),O=n(290),p=n(101),x=n.n(p),f=n(145),g=n.n(f),v=n(100),w=n.n(v),y=n(99),k=n.n(y),S=n(98),T=n.n(S),C=n(96),L=n.n(C),M=n(97),A=n.n(M),N=n(30),I=n(1),U=function(e){for(var t=Object(b.c)((function(e){return e.users})),n=e.logged.username,r={username:"0"},a=0;a<t.length;a++)if(n===t[a].username){r=t[a];break}return Object(I.jsx)(h.a,{position:"static",children:Object(I.jsxs)(m.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(I.jsx)("div",{}),Object(I.jsxs)("div",{children:[Object(I.jsxs)(O.a,{style:{marginRight:10,marginLeft:100},variant:"contained",color:"inherit",component:N.b,to:"/top",children:[Object(I.jsx)("b",{children:"Top"}),Object(I.jsx)(L.a,{style:{marginLeft:10}})]}),Object(I.jsxs)(O.a,{style:{margin:10},variant:"contained",color:"inherit",component:N.b,to:"/fresh",children:[Object(I.jsx)("b",{children:"Fresh"}),Object(I.jsx)(A.a,{style:{marginLeft:10}})]}),Object(I.jsxs)(O.a,{style:{margin:10},variant:"contained",color:"inherit",component:N.b,to:"/newpost",children:[Object(I.jsx)("b",{children:"New post"}),Object(I.jsx)(T.a,{style:{marginLeft:10}})]}),Object(I.jsxs)(O.a,{style:{margin:10},variant:"contained",color:"inherit",component:N.b,to:"/users",children:[Object(I.jsx)("b",{children:"Users"}),Object(I.jsx)(k.a,{style:{marginLeft:10}})]}),Object(I.jsxs)(O.a,{style:{margin:10},variant:"contained",color:"inherit",component:N.b,to:"/users/".concat(r.id),children:[Object(I.jsx)("b",{children:"My Profile"}),Object(I.jsx)(w.a,{style:{marginLeft:10}})]})]}),Object(I.jsxs)("div",{children:[Object(I.jsxs)(O.a,{color:"inherit",component:N.b,to:"/info",children:["Info & Support ",Object(I.jsx)(g.a,{style:{marginLeft:10}})]}),Object(I.jsxs)(O.a,{color:"inherit",sx:{display:{xs:"none",md:"flex"}},onClick:e.handleLogout,children:["Logout ",Object(I.jsx)(x.a,{style:{marginLeft:10}})]})]})]})})},E=function(e){var t=e.meme.media.substr(e.meme.media.lastIndexOf(".")+1);return"mp4"===t||"webm"===t?Object(I.jsx)("video",{id:e.id,controls:!0,children:Object(I.jsx)("source",{src:e.meme.media,type:"video/mp4"})}):Object(I.jsx)("img",{id:e.id,src:e.meme.media,alt:e.meme.title})},R=n(45),D=n(20),P=n(36),F=n.n(P),B="/api/memes",z=null,W={getAll:function(){return F.a.get(B).then((function(e){return e.data}))},create:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:z}},e.next=3,F.a.post(B,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return F.a.put("/api/memes/".concat(e),t).then((function(e){return e.data}))},setToken:function(e){z="bearer ".concat(e)},remove:function(e){var t={headers:{Authorization:z}};return F.a.delete("/api/memes/".concat(e),t).then((function(e){return e.data}))},vote:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(R.a)(Object(R.a)({},t),{},{likes:t.likes+1}),e.next=3,F.a.put("".concat(B,"/").concat(t.id),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:z}},e.next=3,F.a.post("".concat(B,"/").concat(t.id,"/comments"),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},J=function(){return function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAll();case 2:n=e.sent,t({type:"INIT_MEMES",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MEME":return console.log("action.data: ",t.data),[].concat(Object(D.a)(e),[t.data]);case"INIT_MEMES":return t.data;case"VOTE":var n=t.data.id,r=e.find((function(e){return e.id===n})),a=Object(R.a)(Object(R.a)({},r),{},{votes:r.votes+1});return e.map((function(e){return e.id!==n?e:a}));case"COMMENT":return console.log("action.data: ",t.data),[].concat(Object(D.a)(e),[t.data]);default:return e}},G=n(315),q=n(291),_=n(292),H=n(293),V=n(296),Z=n(295),Q=n(294),K=n(325),X=n(114),$=function(e){for(var t=e.memes,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),d=Object(u.a)(i,2),j=d[0],h=d[1],m=Object(q.a)((function(e){return{root:{width:"100%",maxWidth:"36ch"},inline:{display:"inline"}}}))(),p=Object(b.b)(),x=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),f=t[0],g=0;g<t.length;g++)if(x===t[g].id){f=t[g];break}if(!f)return null;var v=f.comments,w=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==c){e.next=4;break}return window.alert("Text required"),e.abrupt("return",null);case 4:n={content:c},W.addComment(f,n).then((function(e){s("")})),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:f.title}),Object(I.jsx)(E,{meme:f}),Object(I.jsxs)("p",{children:[f.likes," likes ",Object(I.jsx)(O.a,{disabled:j,variant:"contained",color:"primary",onClick:function(){h(!0),p(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W.vote(t);case 2:r({type:"VOTE",data:{id:e}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(f.id,f))},children:"like"})]}),Object(I.jsxs)("p",{children:["added by  ",Object(I.jsx)(N.b,{to:"../users/".concat(f.user.id),children:f.user.username})]}),Object(I.jsx)("h2",{children:"Comments"}),Object(I.jsx)(_.a,{className:m.root,children:v.map((function(e){return Object(I.jsxs)("div",{children:[Object(I.jsxs)(H.a,{alignItems:"flex-start",children:[Object(I.jsx)(Q.a,{children:Object(I.jsx)(K.a,{src:e.avatar})}),Object(I.jsx)(Z.a,{primary:e.content,secondary:Object(I.jsxs)(X.a,{component:"span",variant:"body2",className:m.inline,color:"textPrimary",children:[e.user,", ",e.date]})})]}),Object(I.jsx)(V.a,{variant:"inset",component:"li"})]},e.content)}))}),Object(I.jsx)("div",{children:Object(I.jsxs)("form",{onSubmit:w,children:[Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Comment",id:"commentField",type:"text",value:c,name:"Comment",onChange:function(e){var t=e.target;return s(t.value)}})}),Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitMeme-button",type:"submit",children:"Add a comment"})]})})]})},ee=n(104),te=n.n(ee),ne=n(68),re=n.n(ne),ae=n(105),ce=n.n(ae),se=n(56),ie=n.n(se),oe=n(320),le=n(316),ue=n(319),de=n(314),je=null,be={setToken:function(e){je="bearer ".concat(e)},postTicket:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:je}},e.next=3,F.a.post("/api/tickets",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=function(){var e=Object(r.useState)("suggestion"),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],d=s[1],j=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(i.length<10)){e.next=4;break}return window.alert("The text is too short."),e.abrupt("return",null);case 4:r={content:i,type:n},console.log("ticketObject: ",r),be.postTicket(r).then((function(e){a(""),d(""),window.alert("Your ticket has been submitted.")})),window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:Object(I.jsx)("h1",{children:"INFO"})}),Object(I.jsxs)("div",{id:"infoBar",children:[Object(I.jsx)("h2",{children:"Pages"}),Object(I.jsxs)("b",{children:["TOP ",Object(I.jsx)(L.a,{}),":"]}),Object(I.jsxs)("p",{children:["Shows the memes starting from the most liked in a descending order. ",Object(I.jsx)("br",{}),"You can access the comment section of the meme by clicking its title."]}),Object(I.jsxs)("b",{children:["FRESH ",Object(I.jsx)(A.a,{}),":"]}),Object(I.jsxs)("p",{children:["Shows the memes starting from the most recently added in a descending order. ",Object(I.jsx)("br",{}),"You can access the comment section of the meme by clicking its title."]}),Object(I.jsxs)("b",{children:["NEW POST ",Object(I.jsx)(T.a,{}),":"]}),Object(I.jsx)("p",{children:"Add a new post to the site based on a URL-link and Title you've submitted in the field."}),Object(I.jsxs)("b",{children:["USERS ",Object(I.jsx)(k.a,{}),":"]}),Object(I.jsxs)("p",{children:["Shows the list of users and their data. The users are listed starting from the one with most activity points in a descending order. ",Object(I.jsx)("br",{}),"You can view the user's profile page by clicking the name on the list. The profile shows you the user's rank, ",Object(I.jsx)("br",{}),"the memes the person has added. By clicking the link in the title on that list you can access the page of the meme."]}),Object(I.jsxs)("b",{children:["MY PROFILE ",Object(I.jsx)(w.a,{}),":"]}),Object(I.jsx)("p",{children:"Leads to your own profile page. You can change your avatar on this page."}),Object(I.jsxs)("b",{children:["LOGOUT ",Object(I.jsx)(x.a,{}),":"]}),Object(I.jsxs)("p",{children:["Logs you off. By logging off you will have to submit credentials in order to view the site with an account on the next time you enter MemeDump. ",Object(I.jsx)("br",{}),"If you exit the site without logging off your user token will be remembered and you will automatically be logged in as the current user ",Object(I.jsx)("br",{}),"the next time you enter the site."]})]}),Object(I.jsxs)("div",{id:"infoBar",children:[Object(I.jsxs)("h2",{children:["Activity Points ",Object(I.jsx)(te.a,{})]}),Object(I.jsxs)("p",{children:["Activity points define the ranking of a user. ",Object(I.jsx)("br",{}),"These points are earned by following activities: "]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(ce.a,{})," Posting a meme: ",Object(I.jsx)("b",{children:"+3 points"})]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(re.a,{})," Posting a comment: ",Object(I.jsx)("b",{children:"+1 points"})]}),Object(I.jsxs)("p",{children:[Object(I.jsx)(ie.a,{})," Receiving a like from a meme: ",Object(I.jsx)("b",{children:"+1 points"})]})]}),Object(I.jsxs)("div",{id:"infoBar",children:[Object(I.jsx)("h2",{children:"Send a ticket"}),Object(I.jsxs)("p",{children:["In a need to contact the administration? That can be done by sending a ticket here.",Object(I.jsx)("br",{}),"Select a type from 'Suggestion', 'Bug Report' or 'Other issue' and write a description."]}),Object(I.jsxs)("form",{onSubmit:j,children:[Object(I.jsx)("div",{style:{marginBottom:30,marginTop:20},children:Object(I.jsxs)(ue.a,{sx:{m:1,minWidth:160},children:[Object(I.jsx)(oe.a,{id:"label-For-Types",children:"Type"}),Object(I.jsxs)(de.a,{labelId:"typesLabel",id:"types",value:n,label:"Type",onChange:function(e){a(e.target.value)},children:[Object(I.jsx)(le.a,{value:"suggestion",children:"Suggestion"}),Object(I.jsx)(le.a,{value:"bug report",children:"Bug Report"}),Object(I.jsx)(le.a,{value:"other issue",children:"Other Issue"})]})]})}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{sx:{minWidth:300},id:"ticketContent",label:"Describe your issue here",multiline:!0,rows:4,onChange:function(){var e=document.getElementById("ticketContent").value;d(e)}})}),Object(I.jsx)("div",{id:"ticketSubmit",children:Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitTicket-button",type:"submit",children:"Submit"})})]})]})]})},me={getAll:function(){return F.a.get("/api/users").then((function(e){return e.data}))},updateAvatar:function(e,t){var n=Object(R.a)(Object(R.a)({},e),{},{avatar:t});return F.a.put("/api/users/".concat(e.id),n).then((function(e){return e.data}))},newUser:function(e){return F.a.post("/api/users",e).then((function(e){return e.data}))}},Oe=n(318),pe=n(300),xe=n(155),fe=n(322),ge=n(301),ve=n(324),we=n(323),ye=n(147),ke=n.n(ye),Se=n(326),Te=n(327),Ce=Object(q.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Le=Object(xe.a)(),Me=function(e){var t=Ce(),n=a.a.useState((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),r=Object(u.a)(n,1)[0],c=a.a.useState(!1),s=Object(u.a)(c,2),i=s[0],o=s[1],l=function(){o(!1)};return Object(I.jsxs)("div",{children:[Object(I.jsx)(Te.a,{href:"#",variant:"body2",sx:{mt:3,mb:2},onClick:function(){o(!0)},children:"Don't have an account? Sign Up"}),Object(I.jsx)(Oe.a,{open:i,onClose:l,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(I.jsx)("div",{style:r,className:t.paper,children:Object(I.jsxs)("form",{onSubmit:e.registerUser,children:[Object(I.jsx)("h2",{id:"simple-modal-title",children:"Create a new account"}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Username",id:"usernameField",type:"text",value:e.newUsername,name:"Title",onChange:function(t){var n=t.target;return e.setNewUsername(n.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Password",id:"passwordField",type:"text",value:e.newPassword,name:"Title",onChange:function(t){var n=t.target;return e.setNewPassword(n.value)}})}),Object(I.jsxs)("div",{children:[Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitUser-button",type:"submit",children:"Submit"}),Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitUser-button",onClick:l,children:"Close"})]})]})})})]})},Ae=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(u.a)(s,2),d=i[0],j=i[1],b=function(e){var t=e.message;return null===t?null:Object(I.jsx)("div",{className:"error",children:t})},h=function(){var t=Object(l.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(a.length<3||d.length<4)){t.next=4;break}return window.alert("Cannot register a user with given details. The username must be longer than 2 letters and password longer than 3 letters."),t.abrupt("return",null);case 4:r={username:a,password:d,avatar:"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?b=1&k=20&m=1223671392&s=612x612&w=0&h=NlD1eNScGYsHBFjAzWrR0JzwkTOvtddTsq-9v5-LryQ="};try{me.newUser(r).then((function(t){e.setUsername(""),e.setPassword(""),e.dispatch(e.setNotification("Succesfully registered a new user with username: '".concat(e.user.username,"'"),5))}))}catch(c){e.setErrorMessage("An error occured. Make sure that your username and password have at least 3 letters and that your username is unique."),setTimeout((function(){e.setErrorMessage(null)}),3e3),console.log("An error occurred")}window.location.reload();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return document.body.style.backgroundColor="orange",Object(I.jsx)(fe.a,{theme:Le,children:Object(I.jsxs)(pe.a,{children:[Object(I.jsx)(ge.a,{}),Object(I.jsxs)(ve.a,{sx:{bgcolor:"white",marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(we.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(I.jsx)(ke.a,{})}),Object(I.jsx)(Se.a,{id:"title",component:"h1",variant:"h5",children:"MemeDump"}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Login"}),Object(I.jsxs)(ve.a,{component:"form",onSubmit:e.handleLogin,noValidate:!0,sx:{mt:1},children:[Object(I.jsx)(b,{message:e.errorMessage}),Object(I.jsx)(e.Notification,{message:e.noteMessage}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"username",margin:"normal",required:!0,autoComplete:"username",autoFocus:!0,id:"username",type:"text",value:e.username,name:"Username",onChange:function(t){var n=t.target;return e.setUsername(n.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"password",margin:"normal",required:!0,autoComplete:"current-password",id:"password",type:"password",value:e.password,name:"Password",onChange:function(t){var n=t.target;return e.setPassword(n.value)}})}),Object(I.jsx)(O.a,{sx:{mt:3,mb:2},variant:"contained",color:"primary",id:"login-button",type:"submit",children:"Login"}),Object(I.jsx)(Me,{registerUser:h,newUsername:a,setNewUsername:c,newPassword:d,setNewPassword:j})]})]})]})]})})},Ne=function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Make a post"}),Object(I.jsxs)("form",{onSubmit:e.addMeme,children:[Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Title",id:"titleField",type:"text",value:e.newTitle,name:"Title",onChange:function(t){var n=t.target;return e.setNewTitle(n.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Image link (URL)",id:"urlField",type:"text",value:e.newMedia,name:"Url",onChange:function(t){var n=t.target;return e.setNewMedia(n.value)}})}),Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitMeme-button",type:"submit",children:"create"})]})]})},Ie=n(148),Ue=n.n(Ie),Ee=n(149),Re=n.n(Ee),De=n(303),Pe=function(e){return Object(I.jsx)("div",{className:e.classes.root,children:Object(I.jsx)(G.a,{id:"searchField",type:"text",variant:"standard",name:"SearchBar",value:e.filter,onChange:function(t){e.setFilterData(t.target.value)},placeholder:"Search\u2026",className:e.classes.textField,InputProps:{startAdornment:Object(I.jsx)(Ue.a,{fontSize:"small"}),endAdornment:Object(I.jsx)(De.a,{title:"Clear","aria-label":"Clear",size:"small",onClick:function(){e.setFilterData("")},children:Object(I.jsx)(Re.a,{fontSize:"small"})})}})})},Fe={login:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Be=function(e,t){return console.log("content: ",e),function(){var n=Object(l.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"CREATED",data:{content:e}}),setTimeout((function(){r({type:"ZERO"})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(console.log("action: ",t),t.type){case"CREATED":return e="".concat(t.data.content);case"ZERO":return e="";default:return e}},We=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOGIN",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return e=t.data;case"LOGOUT":return e=null;default:return e}},Ye=n(26),Ge=n(304),qe=n(150),_e=n.n(qe),He=Object(q.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var Ve=function(){return null},Ze=function(e){var t=e.users,n=e.memes,c=e.logged;if(console.log("logged: ",c),t.length<1)return null;for(var s=Object(Ye.f)().id,i=t[0],d=[],b=0;b<t.length;b++)if(s===t[b].id){i=t[b];break}for(var h=0;h<n.length;h++)s===n[h].user.id&&d.push(n[h]);function m(){var e=He(),t=a.a.useState((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),n=Object(u.a)(t,1)[0],c=a.a.useState(!1),s=Object(u.a)(c,2),d=s[0],j=s[1],b=Object(r.useState)(""),h=Object(u.a)(b,2),m=h[0],p=h[1],x=Object(r.useState)(),f=Object(u.a)(x,2),g=f[0];f[1];Object(r.useEffect)((function(){console.log(g)}),[g]);var v=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(m.length<12)){e.next=4;break}return window.alert("The URL doesnt seem valid."),e.abrupt("return",null);case 4:me.updateAvatar(i,m).then((function(e){})).catch((function(){console.log("An error occurred")})),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)(O.a,{color:"primary",variant:"contained",onClick:function(){j(!0)},children:"Change Avatar"}),Object(I.jsx)(Oe.a,{open:d,onClose:function(){j(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(I.jsxs)("div",{style:n,className:e.paper,children:[Object(I.jsxs)("form",{onSubmit:v,children:[Object(I.jsx)("h2",{id:"simple-modal-title",children:"Submit a new avatar with a link to the image's URL"}),Object(I.jsx)("div",{children:Object(I.jsx)(G.a,{label:"Avatar",id:"avatarField",type:"text",value:m,name:"Title",onChange:function(e){var t=e.target;return p(t.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(O.a,{variant:"contained",color:"primary",id:"submitAvatar-button",type:"submit",children:"Submit"})})]}),Object(I.jsx)(Ve,{})]})})]})}return c.username===i.username?Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:Object(I.jsx)("img",{alt:"null",src:i.avatar,width:"300",height:"300"})}),Object(I.jsx)(m,{}),Object(I.jsx)("h1",{children:i.username}),Object(I.jsxs)("p",{children:["Activity points: ",Math.abs(3*i.memes.length)+j.getLikes(i,n)+j.getComments(i,n),", ",Object(I.jsxs)("b",{children:["Rank: #",j.getRank(i,t)]})]}),Object(I.jsxs)("p",{children:["Joined in ",i.joined]}),Object(I.jsx)("h2",{children:"Added memes"}),d.map((function(e){return Object(I.jsxs)("div",{children:[Object(I.jsxs)("p",{children:[Object(I.jsx)(N.b,{to:"../memes/".concat(e.id),children:e.title}),Object(I.jsx)(De.a,{onClick:function(){return function(e){return!!confirm("Are you sure you want to delete this post?")&&(W.remove(e),window.location.reload(),!0)}(e.id)},"aria-label":"delete",size:"medium",children:Object(I.jsx)(_e.a,{fontSize:"inherit"})})]}),Object(I.jsx)(E,{meme:e,id:"userPageMedia"}),Object(I.jsxs)("p",{children:[e.likes," ",Object(I.jsx)(ie.a,{}),"    ",e.comments.length," ",Object(I.jsx)(re.a,{})]}),Object(I.jsx)(Ge.a,{})]},e.id)}))]}):i?Object(I.jsxs)("div",{children:[Object(I.jsx)("img",{alt:"null",src:i.avatar,width:"300",height:"300"}),Object(I.jsx)("h1",{children:i.username}),Object(I.jsxs)("p",{children:["Activity points: ",Math.abs(3*i.memes.length)+j.getLikes(i,n)+j.getComments(i,n),", ",Object(I.jsxs)("b",{children:["Rank: #",j.getRank(i,t)]})]}),Object(I.jsxs)("p",{children:["Joined in ",i.joined]}),Object(I.jsx)("h2",{children:"Added memes"}),d.map((function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:Object(I.jsx)(N.b,{to:"../memes/".concat(e.id),children:e.title})}),Object(I.jsx)(E,{meme:e,id:"userPageMedia"}),Object(I.jsxs)("p",{children:[e.likes," ",Object(I.jsx)(ie.a,{}),"    ",e.comments.length," ",Object(I.jsx)(re.a,{})]}),Object(I.jsx)(Ge.a,{})]},e.id)}))]}):void 0},Qe=n(154),Ke=n(305),Xe=n(306),$e=n(307),et=n(308),tt=n(309),nt=n(215),rt=n(310),at=n(311),ct=n(312),st=n(313),it=n(317),ot=n(111),lt=n(112),ut=n(151),dt=n.n(ut),jt=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],d=s[1],h=Object(r.useState)(""),m=Object(u.a)(h,2),O=m[0],p=m[1],x=Object(r.useState)(""),f=Object(u.a)(x,2),g=f[0],v=f[1],w=Object(r.useState)(""),y=Object(u.a)(w,2),k=y[0],S=y[1],T=Object(r.useState)(null),C=Object(u.a)(T,2),L=C[0],M=C[1],A=Object(r.useState)(null),R=Object(u.a)(A,2),D=R[0],P=R[1],F=Object(b.b)(),B=Object(b.c)((function(e){return e.notification})),z=Object(b.c)((function(e){return e.users})),Y=Object(b.c)((function(e){return e.memes}));z.sort((function(e,t){if(Math.abs(3*e.memes.length)+j.getLikes(e,Y)+j.getComments(e,Y)>Math.abs(3*t.memes.length)+j.getLikes(t,Y)+j.getComments(t,Y))return-1;if(Math.abs(3*e.memes.length)+j.getLikes(e,Y)+j.getComments(e,Y)<Math.abs(3*t.memes.length)+j.getLikes(t,Y)+j.getComments(t,Y))return 1;return 0}));Object(r.useEffect)((function(){F(J())}),[F]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedMemeAppUser");if(e){var t=JSON.parse(e);M(t),F(We(t)),W.setToken(t.token),be.setToken(t.token)}}),[F]);var G=Object(Qe.a)({palette:{primary:{main:ot.a[500]},secondary:{main:lt.a[500]}}}),_=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Fe.login({username:O,password:g});case 4:n=e.sent,window.localStorage.setItem("loggedMemeAppUser",JSON.stringify(n)),W.setToken(n.token),F(We(n)),M(n),p(""),v(""),F(Be("Welcome '".concat(n.username,"'"),5)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),P("wrong credentials"),setTimeout((function(){P(null)}),3e3);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedMemeAppUser"),F(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.location.href="/";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""===n||i.length<5)){e.next=4;break}return window.alert("Title or URL missing or not valid."),e.abrupt("return",null);case 4:r={title:n,media:i},W.create(r).then((function(e){F(Be("A new meme '".concat(n,"' added"),5)),a("")})).catch((function(){P("An error occurred"),setTimeout((function(){P(null)}),3e3)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Object(b.c)((function(e){return e.loggedIn})),Q=function(e){var t=e.message;return""===t?null:Object(I.jsx)("div",{children:t&&Object(I.jsx)(it.a,{severity:"success",children:t})})},X=Object(q.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},imageList:{width:600,height:900},icon:{color:"rgba(255, 255, 255, 0.54)"}}}))(),ee=function(){return Y.sort(j.compareByLikes),Object(I.jsx)(Ke.a,{className:X.imageList,children:Y.map((function(e){return Object(I.jsxs)(Xe.a,{cols:2,style:{height:"auto"},children:[Object(I.jsx)(E,{meme:e,id:"mainPageMedia"}),Object(I.jsx)($e.a,{title:Object(I.jsx)("span",{children:Object(I.jsx)(N.b,{to:"../memes/".concat(e.id),children:e.title})}),subtitle:Object(I.jsxs)("span",{children:["by ",e.user.username," on ",e.date]}),actionIcon:Object(I.jsxs)(De.a,{"aria-label":"Like",href:"../memes/".concat(e.id),className:X.icon,children:[Object(I.jsx)(ie.a,{}),Object(I.jsxs)("span",{children:[" ",e.likes," likes "]})]})})]},e.id)}))})},ne=function(){return Y.sort(j.compareByDate),Object(I.jsx)(Ke.a,{rowHeight:180,className:X.imageList,children:Y.map((function(e){return Object(I.jsxs)(Xe.a,{cols:2,style:{height:"auto"},children:[Object(I.jsx)(E,{meme:e,id:"mainPageMedia"}),Object(I.jsx)($e.a,{title:Object(I.jsx)("span",{children:Object(I.jsx)(N.b,{to:"../memes/".concat(e.id),children:e.title})}),subtitle:Object(I.jsxs)("span",{children:["by ",e.user.username," on ",e.date]}),actionIcon:Object(I.jsxs)(De.a,{"aria-label":"Like",href:"../memes/".concat(e.id),className:X.icon,children:[Object(I.jsx)(ie.a,{}),Object(I.jsxs)("span",{children:[" ",e.likes," likes "]})]})})]},e.id)}))})};return null===L?Object(I.jsx)(Ae,{dispatch:F,username:O,setUsername:p,password:g,setPassword:v,errorMessage:D,handleLogin:_,setErrorMessage:P,setNotification:Be,noteMessage:B,Notification:Q,user:L}):Object(I.jsx)(et.a,{theme:G,children:Object(I.jsx)(pe.a,{children:Object(I.jsxs)(N.a,{children:[Object(I.jsx)("div",{id:"title",children:Object(I.jsx)("h1",{children:"MemeDump"})}),Object(I.jsx)("div",{id:"loggedInfo",children:Object(I.jsxs)("p",{children:["Logged in as: ",L.username]})}),Object(I.jsx)(Q,{message:B}),Object(I.jsxs)(ve.a,{sx:{bgcolor:"white",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(U,{handleLogout:H,logged:Z}),Object(I.jsxs)(Ye.c,{children:[Object(I.jsx)(Ye.a,{path:"/memes/:id",children:Object(I.jsx)($,{memes:Y})}),Object(I.jsx)(Ye.a,{path:"/top",children:Object(I.jsx)(ee,{})}),Object(I.jsx)(Ye.a,{path:"/fresh",children:Object(I.jsx)(ne,{})}),Object(I.jsx)(Ye.a,{path:"/info",children:Object(I.jsx)(he,{})}),Object(I.jsx)(Ye.a,{path:"/newpost",children:Object(I.jsx)(Ne,{addMeme:V,newTitle:n,setNewTitle:a,newMedia:i,setNewMedia:d})}),Object(I.jsx)(Ye.a,{path:"/users/:id",children:Object(I.jsx)(Ze,{users:z,memes:Y,logged:Z})}),Object(I.jsxs)(Ye.a,{path:"/users",children:[Object(I.jsx)("div",{id:"searchBar",children:Object(I.jsx)(Pe,{filter:k,setFilterData:function(e){setTimeout((function(){return S(e)}),0)},classes:X})}),Object(I.jsx)(tt.a,{component:nt.a,children:Object(I.jsx)(rt.a,{children:Object(I.jsx)(at.a,{children:z.map((function(e){return e.username.includes(k)?Object(I.jsxs)(ct.a,{children:[Object(I.jsx)(st.a,{children:Object(I.jsxs)("span",{children:[Object(I.jsx)(K.a,{alt:e.username,src:e.avatar}),Object(I.jsx)(N.b,{to:"../users/".concat(e.id),children:e.username})]})}),Object(I.jsxs)(st.a,{children:[Object(I.jsx)(te.a,{}),"Activity points: ",Math.abs(3*e.memes.length)+j.getLikes(e,Y)+j.getComments(e,Y)]}),Object(I.jsxs)(st.a,{children:[Object(I.jsx)(ce.a,{}),"posts: ",e.memes.length]}),Object(I.jsxs)(st.a,{children:[Object(I.jsx)(ie.a,{}),"likes received: ",j.getLikes(e,Y)]}),Object(I.jsxs)(st.a,{children:[Object(I.jsx)(re.a,{}),"comments posted: ",j.getComments(e,Y)]}),Object(I.jsxs)(st.a,{children:[Object(I.jsx)(dt.a,{})," joined in ",e.joined]})]},e.id):null}))})})})]}),Object(I.jsx)(Ye.a,{path:"/",children:Object(I.jsx)(ee,{})})]})]})]})})})},bt=n(87),ht=n(152),mt=n(153),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},pt=Object(bt.combineReducers)({users:Ot,memes:Y,notification:ze,loggedIn:Je}),xt=Object(bt.createStore)(pt,Object(mt.composeWithDevTools)(Object(bt.applyMiddleware)(ht.a)));W.getAll().then((function(e){return xt.dispatch(J())})),me.getAll().then((function(e){return xt.dispatch(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),xt.subscribe((function(){return console.log("store: ",xt.getState())}));var ft=xt;s.a.render(Object(I.jsx)(b.a,{store:ft,children:Object(I.jsx)(jt,{})}),document.getElementById("root"))},79:function(e,t,n){}},[[214,1,2]]]);
//# sourceMappingURL=main.d5d77034.chunk.js.map