(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{192:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),s=n.n(c),i=(n(71),n(8)),o=n.n(i),l=n(13),u=n(11),d=n(41),j=n(30),b=n(1),h=function(e){var t=e.meme.media.substr(e.meme.media.lastIndexOf(".")+1);return"mp4"===t||"webm"===t?Object(b.jsx)("video",{id:e.id,controls:!0,children:Object(b.jsx)("source",{src:e.meme.media,type:"video/mp4"})}):Object(b.jsx)("img",{id:e.id,src:e.meme.media,alt:e.meme.title})},m=n(40),p=n(18),O=n(29),x=n.n(O),f="/api/memes",v=null,g={getAll:function(){return x.a.get(f).then((function(e){return e.data}))},create:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,x.a.post(f,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return x.a.put("/api/memes/".concat(e),t).then((function(e){return e.data}))},setToken:function(e){v="bearer ".concat(e)},remove:function(e){var t={headers:{Authorization:v}};return x.a.delete("/api/memes/".concat(e),t).then((function(e){return e.data}))},vote:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(m.a)(Object(m.a)({},t),{},{likes:t.likes+1}),e.next=3,x.a.put("".concat(f,"/").concat(t.id),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,x.a.post("".concat(f,"/").concat(t.id,"/comments"),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},w=function(){return function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:n=e.sent,t({type:"INIT_MEMES",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MEME":return console.log("action.data: ",t.data),[].concat(Object(p.a)(e),[t.data]);case"INIT_MEMES":return t.data;case"VOTE":var n=t.data.id,r=e.find((function(e){return e.id===n})),a=Object(m.a)(Object(m.a)({},r),{},{votes:r.votes+1});return e.map((function(e){return e.id!==n?e:a}));case"COMMENT":return console.log("action.data: ",t.data),[].concat(Object(p.a)(e),[t.data]);default:return e}},k=n(241),S=n(268),T=n(238),C=n(243),M=n(244),A=n(247),N=n(246),I=n(245),L=n(276),U=n(101),E=function(e){for(var t=e.memes,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),m=Object(u.a)(i,2),p=m[0],O=m[1],x=Object(T.a)((function(e){return{root:{width:"100%",maxWidth:"36ch"},inline:{display:"inline"}}}))(),f=Object(d.b)(),v=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),w=t[0],y=0;y<t.length;y++)if(v===t[y].id){w=t[y];break}if(!w)return null;var E=w.comments,P=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==c){e.next=4;break}return window.alert("Text required"),e.abrupt("return",null);case 4:n={content:c},g.addComment(w,n).then((function(e){s("")})),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:w.title}),Object(b.jsx)(h,{meme:w}),Object(b.jsxs)("p",{children:[w.likes," likes ",Object(b.jsx)(k.a,{disabled:p,variant:"contained",color:"primary",onClick:function(){O(!0),f(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.vote(t);case 2:r({type:"VOTE",data:{id:e}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(w.id,w))},children:"like"})]}),Object(b.jsxs)("p",{children:["added by  ",Object(b.jsx)(j.b,{to:"../users/".concat(w.user.id),children:w.user.username})]}),Object(b.jsx)("h2",{children:"Comments"}),Object(b.jsx)(C.a,{className:x.root,children:E.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)(M.a,{alignItems:"flex-start",children:[Object(b.jsx)(I.a,{children:Object(b.jsx)(L.a,{src:e.avatar})}),Object(b.jsx)(N.a,{primary:e.content,secondary:Object(b.jsxs)(U.a,{component:"span",variant:"body2",className:x.inline,color:"textPrimary",children:[e.user,", ",e.date]})})]}),Object(b.jsx)(A.a,{variant:"inset",component:"li"})]},e.content)}))}),Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:P,children:[Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Comment",id:"commentField",type:"text",value:c,name:"Comment",onChange:function(e){var t=e.target;return s(t.value)}})}),Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitMeme-button",type:"submit",children:"Add a comment"})]})})]})},P=n(93),R=n.n(P),F=n(61),D=n.n(F),B=n(94),z=n.n(B),J=n(90),W=n.n(J),Y=n(87),G=n.n(Y),q=n(88),_=n.n(q),H=n(89),V=n.n(H),Z=n(54),Q=n.n(Z),K=n(91),X=n.n(K),$=n(92),ee=n.n($),te=null,ne={setToken:function(e){te="bearer ".concat(e)},postTicket:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:te}},e.next=3,x.a.post("/api/tickets",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(){var e=Object(r.useState)("suggestion"),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],d=s[1],j=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(i.length<10)){e.next=4;break}return window.alert("The text is too short."),e.abrupt("return",null);case 4:r={content:i,type:n},console.log("ticketObject: ",r),ne.postTicket(r).then((function(e){a(""),d(""),window.alert("Your ticket has been submitted.")})),window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"INFO"})}),Object(b.jsxs)("div",{id:"infoBar",children:[Object(b.jsx)("h2",{children:"Pages"}),Object(b.jsxs)("b",{children:["TOP ",Object(b.jsx)(G.a,{}),":"]}),Object(b.jsxs)("p",{children:["Shows the memes starting from the most liked in a descending order. ",Object(b.jsx)("br",{}),"You can access the comment section of the meme by clicking its title."]}),Object(b.jsxs)("b",{children:["FRESH ",Object(b.jsx)(_.a,{}),":"]}),Object(b.jsxs)("p",{children:["Shows the memes starting from the most recently added in a descending order. ",Object(b.jsx)("br",{}),"You can access the comment section of the meme by clicking its title."]}),Object(b.jsxs)("b",{children:["NEW POST ",Object(b.jsx)(V.a,{}),":"]}),Object(b.jsx)("p",{children:"Add a new post to the site based on a URL-link and Title you've submitted in the field."}),Object(b.jsxs)("b",{children:["USERS ",Object(b.jsx)(W.a,{}),":"]}),Object(b.jsxs)("p",{children:["Shows the list of users and their data. The users are listed starting from the one with most activity points in a descending order. ",Object(b.jsx)("br",{}),"You can view the user's profile page by clicking the name on the list. The profile shows you the user's rank, ",Object(b.jsx)("br",{}),"the memes the person has added. By clicking the link in the title on that list you can access the page of the meme."]}),Object(b.jsxs)("b",{children:["MY PROFILE ",Object(b.jsx)(X.a,{}),":"]}),Object(b.jsx)("p",{children:"Leads to your own profile page. You can change your avatar on this page."}),Object(b.jsxs)("b",{children:["LOGOUT ",Object(b.jsx)(ee.a,{}),":"]}),Object(b.jsxs)("p",{children:["Logs you off. By logging off you will have to submit credentials in order to view the site with an account on the next time you enter MemeDump. ",Object(b.jsx)("br",{}),"If you exit the site without logging off your user token will be remembered and you will automatically be logged in as the current user ",Object(b.jsx)("br",{}),"the next time you enter the site."]})]}),Object(b.jsxs)("div",{id:"infoBar",children:[Object(b.jsxs)("h2",{children:["Activity Points ",Object(b.jsx)(R.a,{})]}),Object(b.jsxs)("p",{children:["Activity points define the ranking of a user. ",Object(b.jsx)("br",{}),"These points are earned by following activities: "]}),Object(b.jsxs)("p",{children:[Object(b.jsx)(z.a,{})," Posting a meme: ",Object(b.jsx)("b",{children:"+3 points"})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)(D.a,{})," Posting a comment: ",Object(b.jsx)("b",{children:"+1 points"})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)(Q.a,{})," Receiving a like from a meme: ",Object(b.jsx)("b",{children:"+1 points"})]})]}),Object(b.jsxs)("div",{id:"infoBar",children:[Object(b.jsx)("h2",{children:"Send a ticket"}),Object(b.jsxs)("p",{children:["In a need to contact the administration? That can be done by sending a ticket here.",Object(b.jsx)("br",{}),"Select a type from 'Suggestion', 'Bug Report' or 'Other issue' and write a description."]}),Object(b.jsxs)("form",{onSubmit:j,children:[Object(b.jsxs)("div",{style:{marginBottom:30,marginTop:20},children:[Object(b.jsx)("label",{htmlFor:"types",children:"Choose a type for your ticket: "}),Object(b.jsxs)("select",{name:"types",id:"types",onChange:function(){var e=document.getElementById("types").value;a(e)},children:[Object(b.jsx)("option",{value:"Suggestion",children:"Suggestion"}),Object(b.jsx)("option",{value:"Bug Report",children:"Bug Report"}),Object(b.jsx)("option",{value:"Other Issue",children:"Other Issue"})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Describe your issue below: "}),Object(b.jsx)("textarea",{rows:"4",cols:"50",name:"ticketContent",type:"text",id:"ticketContent",onChange:function(){var e=document.getElementById("ticketContent").value;d(e)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitTicket-button",type:"submit",children:"Submit"})})]})]})]})},ae={getAll:function(){return x.a.get("/api/users").then((function(e){return e.data}))},updateAvatar:function(e,t){var n=Object(m.a)(Object(m.a)({},e),{},{avatar:t});return x.a.put("/api/users/".concat(e.id),n).then((function(e){return e.data}))},updateAvatarByFile:function(e,t){console.log("newavatarfile: ",t);x.a.post("/api/upload",t).then((function(e){return console.log(e)})).catch((function(e){return console.log()}))},newUser:function(e){return x.a.post("/api/users",e).then((function(e){return e.data}))}},ce=n(270),se=n(250),ie=n(138),oe=n(274),le=n(277),ue=n(275),de=n(271),je=n(129),be=n.n(je),he=n(278),me=n(269),pe=Object(T.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Oe=Object(ie.a)(),xe=function(e){var t=pe(),n=a.a.useState((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),r=Object(u.a)(n,1)[0],c=a.a.useState(!1),s=Object(u.a)(c,2),i=s[0],o=s[1],l=function(){o(!1)};return Object(b.jsxs)("div",{children:[Object(b.jsx)(me.a,{href:"#",variant:"body2",sx:{mt:3,mb:2},onClick:function(){o(!0)},children:"Don't have an account? Sign Up"}),Object(b.jsx)(ce.a,{open:i,onClose:l,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(b.jsx)("div",{style:r,className:t.paper,children:Object(b.jsxs)("form",{onSubmit:e.registerUser,children:[Object(b.jsx)("h2",{id:"simple-modal-title",children:"Create a new account"}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Username",id:"usernameField",type:"text",value:e.newUsername,name:"Title",onChange:function(t){var n=t.target;return e.setNewUsername(n.value)}})}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Password",id:"passwordField",type:"text",value:e.newPassword,name:"Title",onChange:function(t){var n=t.target;return e.setNewPassword(n.value)}})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitUser-button",type:"submit",children:"Submit"}),Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitUser-button",onClick:l,children:"Close"})]})]})})})]})},fe=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(u.a)(s,2),d=i[0],j=i[1],h=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"error",children:t})},m=function(){var t=Object(l.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(a.length<3||d.length<4)){t.next=4;break}return window.alert("Cannot register a user with given details. The username must be longer than 2 letters and password longer than 3 letters."),t.abrupt("return",null);case 4:r={username:a,password:d,avatar:"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?b=1&k=20&m=1223671392&s=612x612&w=0&h=NlD1eNScGYsHBFjAzWrR0JzwkTOvtddTsq-9v5-LryQ="};try{ae.newUser(r).then((function(t){e.setUsername(""),e.setPassword(""),e.dispatch(e.setNotification("Succesfully registered a new user with username: '".concat(e.user.username,"'"),5))}))}catch(c){e.setErrorMessage("An error occured. Make sure that your username and password have at least 3 letters and that your username is unique."),setTimeout((function(){e.setErrorMessage(null)}),3e3),console.log("An error occurred")}window.location.reload();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return document.body.style.backgroundColor="orange",Object(b.jsx)(oe.a,{theme:Oe,children:Object(b.jsxs)(se.a,{children:[Object(b.jsx)(le.a,{}),Object(b.jsxs)(ue.a,{sx:{bgcolor:"white",marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(de.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(b.jsx)(be.a,{})}),Object(b.jsx)(he.a,{id:"title",component:"h1",variant:"h5",children:"MemeDump"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Login"}),Object(b.jsxs)(ue.a,{component:"form",onSubmit:e.handleLogin,noValidate:!0,sx:{mt:1},children:[Object(b.jsx)(h,{message:e.errorMessage}),Object(b.jsx)(e.Notification,{message:e.noteMessage}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"username",margin:"normal",required:!0,autoComplete:"username",autoFocus:!0,id:"username",type:"text",value:e.username,name:"Username",onChange:function(t){var n=t.target;return e.setUsername(n.value)}})}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"password",margin:"normal",required:!0,autoComplete:"current-password",id:"password",type:"password",value:e.password,name:"Password",onChange:function(t){var n=t.target;return e.setPassword(n.value)}})}),Object(b.jsx)(k.a,{sx:{mt:3,mb:2},variant:"contained",color:"primary",id:"login-button",type:"submit",children:"Login"}),Object(b.jsx)(xe,{registerUser:m,newUsername:a,setNewUsername:c,newPassword:d,setNewPassword:j})]})]})]})]})})},ve=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Make a post"}),Object(b.jsxs)("form",{onSubmit:e.addMeme,children:[Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Title",id:"titleField",type:"text",value:e.newTitle,name:"Title",onChange:function(t){var n=t.target;return e.setNewTitle(n.value)}})}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Image link (URL)",id:"urlField",type:"text",value:e.newMedia,name:"Url",onChange:function(t){var n=t.target;return e.setNewMedia(n.value)}})}),Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitMeme-button",type:"submit",children:"create"})]})]})},ge={login:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},we=function(e,t){return console.log("content: ",e),function(){var n=Object(l.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"CREATED",data:{content:e}}),setTimeout((function(){r({type:"ZERO"})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(console.log("action: ",t),t.type){case"CREATED":return e="".concat(t.data.content);case"ZERO":return e="";default:return e}},ke=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOGIN",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return e=t.data;case"LOGOUT":return e=null;default:return e}},Te=n(19),Ce=n(279),Me=n(130),Ae=n.n(Me),Ne=n(256),Ie=Object(T.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var Le=function(e){var t=e.users,n=e.memes,c=e.logged;if(console.log("logged: ",c),t.length<1)return null;for(var s=Object(Te.f)().id,i=t[0],d=[],m=0;m<t.length;m++)if(s===t[m].id){i=t[m];break}for(var p=0;p<n.length;p++)s===n[p].user.id&&d.push(n[p]);function O(e){for(var t=0,r=0;r<n.length;r++)n[r].user.id===e.id&&(t+=n[r].likes);return t}function x(e){for(var t=0,r=0;r<n.length;r++)for(var a=0;a<n[r].comments.length;a++)n[r].comments[a].user===e.username&&t++;return t}function f(e){for(var n=0;n<t.length;n++)if(t[n]===e)return n+1;return t.length-1}function v(){var e=Ie(),t=a.a.useState((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),n=Object(u.a)(t,1)[0],c=a.a.useState(!1),s=Object(u.a)(c,2),d=s[0],j=s[1],h=Object(r.useState)(""),m=Object(u.a)(h,2),p=m[0],O=m[1],x=Object(r.useState)(),f=Object(u.a)(x,2),v=f[0];f[1];Object(r.useEffect)((function(){console.log(v)}),[v]);var g=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(p.length<12)){e.next=4;break}return window.alert("The URL doesnt seem valid."),e.abrupt("return",null);case 4:ae.updateAvatar(i,p).then((function(e){})).catch((function(){console.log("An error occurred")})),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)(k.a,{color:"primary",variant:"contained",onClick:function(){j(!0)},children:"Change Avatar"}),Object(b.jsx)(ce.a,{open:d,onClose:function(){j(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(b.jsxs)("div",{style:n,className:e.paper,children:[Object(b.jsxs)("form",{onSubmit:g,children:[Object(b.jsx)("h2",{id:"simple-modal-title",children:"Submit a new avatar with a link to the image's URL"}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{label:"Avatar",id:"avatarField",type:"text",value:p,name:"Title",onChange:function(e){var t=e.target;return O(t.value)}})}),Object(b.jsx)("div",{children:Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitAvatar-button",type:"submit",children:"Submit"})})]}),Object(b.jsx)("h2",{id:"simple-modal-title",children:"..Or upload a jpg file"}),Object(b.jsxs)("form",{action:"http://localhost:3003/api/upload",method:"post",enctype:"multipart/form-data",children:[Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("label",{htmlFor:"file",children:"File"}),Object(b.jsx)("input",{name:"avatar",type:"file",id:"file",accept:".jpg",multiple:!0})]}),Object(b.jsx)("div",{children:Object(b.jsx)(k.a,{variant:"contained",color:"primary",id:"submitAvatar-button",type:"submit",children:"Submit"})})]})]})})]})}return c.username===i.username?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{alt:"null",src:i.avatar,width:"300",height:"300"})}),Object(b.jsx)(v,{}),Object(b.jsx)("h1",{children:i.username}),Object(b.jsxs)("p",{children:["Activity points: ",Math.abs(3*i.memes.length)+O(i)+x(i),", ",Object(b.jsxs)("b",{children:["Rank: #",f(i)]})]}),Object(b.jsxs)("p",{children:["Joined in ",i.joined]}),Object(b.jsx)("h2",{children:"Added memes"}),d.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[Object(b.jsx)(j.b,{to:"../memes/".concat(e.id),children:e.title}),Object(b.jsx)(Ne.a,{onClick:function(){return function(e){return!!confirm("Are you sure you want to delete this post?")&&(g.remove(e),window.location.reload(),!0)}(e.id)},"aria-label":"delete",size:"medium",children:Object(b.jsx)(Ae.a,{fontSize:"inherit"})})]}),Object(b.jsx)(h,{meme:e,id:"userPageMedia"}),Object(b.jsxs)("p",{children:[e.likes," ",Object(b.jsx)(Q.a,{}),"    ",e.comments.length," ",Object(b.jsx)(D.a,{})]}),Object(b.jsx)(Ce.a,{})]},e.id)}))]}):i?Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{alt:"null",src:i.avatar,width:"300",height:"300"}),Object(b.jsx)("h1",{children:i.username}),Object(b.jsxs)("p",{children:["Activity points: ",Math.abs(3*i.memes.length)+O(i)+x(i),", ",Object(b.jsxs)("b",{children:["Rank: #",f(i)]})]}),Object(b.jsxs)("p",{children:["Joined in ",i.joined]}),Object(b.jsx)("h2",{children:"Added memes"}),d.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)(j.b,{to:"../memes/".concat(e.id),children:e.title})}),Object(b.jsx)(h,{meme:e,id:"userPageMedia"}),Object(b.jsxs)("p",{children:[e.likes," ",Object(b.jsx)(Q.a,{}),"    ",e.comments.length," ",Object(b.jsx)(D.a,{})]}),Object(b.jsx)(Ce.a,{})]},e.id)}))]}):void 0},Ue=n(257),Ee=n(258),Pe=n(137),Re=n(259),Fe=n(260),De=n(261),Be=n(262),ze=n(263),Je=n(194),We=n(264),Ye=n(265),Ge=n(266),qe=n(267),_e=n(272),He=n(98),Ve=n(99),Ze=n(134),Qe=n.n(Ze),Ke=n(132),Xe=n.n(Ke),$e=n(133),et=n.n($e),tt=n(131),nt=n.n(tt),rt=function(e){for(var t=Object(d.c)((function(e){return e.users})),n=e.logged.username,r={username:"0"},a=0;a<t.length;a++)if(n===t[a].username){r=t[a];break}return Object(b.jsx)(Ue.a,{position:"static",children:Object(b.jsxs)(Ee.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(b.jsx)("div",{}),Object(b.jsxs)("div",{children:[Object(b.jsxs)(k.a,{style:{marginRight:10,marginLeft:100},variant:"contained",color:"inherit",component:j.b,to:"/top",children:[Object(b.jsx)("b",{children:"Top"}),Object(b.jsx)(G.a,{style:{marginLeft:10}})]}),Object(b.jsxs)(k.a,{style:{margin:10},variant:"contained",color:"inherit",component:j.b,to:"/fresh",children:[Object(b.jsx)("b",{children:"Fresh"}),Object(b.jsx)(_.a,{style:{marginLeft:10}})]}),Object(b.jsxs)(k.a,{style:{margin:10},variant:"contained",color:"inherit",component:j.b,to:"/newpost",children:[Object(b.jsx)("b",{children:"New post"}),Object(b.jsx)(V.a,{style:{marginLeft:10}})]}),Object(b.jsxs)(k.a,{style:{margin:10},variant:"contained",color:"inherit",component:j.b,to:"/users",children:[Object(b.jsx)("b",{children:"Users"}),Object(b.jsx)(W.a,{style:{marginLeft:10}})]}),Object(b.jsxs)(k.a,{style:{margin:10},variant:"contained",color:"inherit",component:j.b,to:"/users/".concat(r.id),children:[Object(b.jsx)("b",{children:"My Profile"}),Object(b.jsx)(X.a,{style:{marginLeft:10}})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)(k.a,{color:"inherit",component:j.b,to:"/info",children:["Info & Support ",Object(b.jsx)(nt.a,{style:{marginLeft:10}})]}),Object(b.jsxs)(k.a,{color:"inherit",sx:{display:{xs:"none",md:"flex"}},onClick:e.handleLogout,children:["Logout ",Object(b.jsx)(ee.a,{style:{marginLeft:10}})]})]})]})})},at=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],m=s[1],p=Object(r.useState)(""),O=Object(u.a)(p,2),x=O[0],f=O[1],v=Object(r.useState)(""),y=Object(u.a)(v,2),k=y[0],C=y[1],M=Object(r.useState)(""),A=Object(u.a)(M,2),N=A[0],I=A[1],U=Object(r.useState)(null),P=Object(u.a)(U,2),F=P[0],B=P[1],J=Object(r.useState)(null),W=Object(u.a)(J,2),Y=W[0],G=W[1],q=Object(d.b)(),_=Object(d.c)((function(e){return e.notification})),H=Object(d.c)((function(e){return e.users})),V=Object(d.c)((function(e){return e.memes}));H.sort((function(e,t){if(Math.abs(3*e.memes.length)+le(e)+de(e)>Math.abs(3*t.memes.length)+le(t)+de(t))return-1;if(Math.abs(3*e.memes.length)+le(e)+de(e)<Math.abs(3*t.memes.length)+le(t)+de(t))return 1;return 0})),Object(r.useEffect)((function(){q(w())}),[q]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedMemeAppUser");if(e){var t=JSON.parse(e);B(t),q(ke(t)),g.setToken(t.token),ne.setToken(t.token)}}),[q]);var Z=Object(Pe.a)({palette:{primary:{main:He.a[500]},secondary:{main:Ve.a[500]}}}),K=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ge.login({username:x,password:k});case 4:n=e.sent,window.localStorage.setItem("loggedMemeAppUser",JSON.stringify(n)),g.setToken(n.token),q(ke(n)),B(n),f(""),C(""),q(we("Welcome '".concat(n.username,"'"),5)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),G("wrong credentials"),setTimeout((function(){G(null)}),3e3);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedMemeAppUser"),q(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.location.href="/";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""===n||i.length<5)){e.next=4;break}return window.alert("Title or URL missing or not valid."),e.abrupt("return",null);case 4:r={title:n,media:i},g.create(r).then((function(e){q(we("A new meme '".concat(n,"' added"),5)),a("")})).catch((function(){G("An error occurred"),setTimeout((function(){G(null)}),3e3)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=Object(d.c)((function(e){return e.loggedIn})),te=function(e){var t=e.message;return""===t?null:Object(b.jsx)("div",{children:t&&Object(b.jsx)(_e.a,{severity:"success",children:t})})},ae=Object(T.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},imageList:{width:600,height:900},icon:{color:"rgba(255, 255, 255, 0.54)"}}}))(),ce=function(e){I(e.target.value),console.log("Filter: ",N)},ie=function(){I(""),console.log("Filter: ",N)};function oe(){return Object(b.jsx)("div",{className:ae.root,children:Object(b.jsx)(S.a,{variant:"standard",value:N,onChange:ce,placeholder:"Search\u2026",className:ae.textField,InputProps:{startAdornment:Object(b.jsx)(Xe.a,{fontSize:"small"}),endAdornment:Object(b.jsx)(Ne.a,{title:"Clear","aria-label":"Clear",size:"small",onClick:ie,children:Object(b.jsx)(et.a,{fontSize:"small"})})}})})}function le(e){for(var t=0,n=0;n<V.length;n++)V[n].user.id===e.id&&(t+=V[n].likes);return t}function de(e){for(var t=0,n=0;n<V.length;n++)for(var r=0;r<V[n].comments.length;r++)V[n].comments[r].user===e.username&&t++;return t}function je(e,t){return e.likes>t.likes?-1:e.likes<t.likes?1:0}function be(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}function he(e,t){var n=be(e.date),r=be(t.date);return n.getTime()>r.getTime()?-1:n.getTime()<r.getTime()?1:0}var me=function(){return V.sort(je),Object(b.jsx)(Re.a,{className:ae.imageList,children:V.map((function(e){return Object(b.jsxs)(Fe.a,{cols:2,style:{height:"auto"},children:[Object(b.jsx)(h,{meme:e,id:"mainPageMedia"}),Object(b.jsx)(De.a,{title:Object(b.jsx)("span",{children:Object(b.jsx)(j.b,{to:"../memes/".concat(e.id),children:e.title})}),subtitle:Object(b.jsxs)("span",{children:["by ",e.user.username," on ",e.date]}),actionIcon:Object(b.jsxs)(Ne.a,{"aria-label":"Like",href:"../memes/".concat(e.id),className:ae.icon,children:[Object(b.jsx)(Q.a,{}),Object(b.jsxs)("span",{children:[" ",e.likes," likes "]})]})})]},e.id)}))})},pe=function(){return V.sort(he),Object(b.jsx)(Re.a,{rowHeight:180,className:ae.imageList,children:V.map((function(e){return Object(b.jsxs)(Fe.a,{cols:2,style:{height:"auto"},children:[Object(b.jsx)(h,{meme:e,id:"mainPageMedia"}),Object(b.jsx)(De.a,{title:Object(b.jsx)("span",{children:Object(b.jsx)(j.b,{to:"../memes/".concat(e.id),children:e.title})}),subtitle:Object(b.jsxs)("span",{children:["by ",e.user.username," on ",e.date]}),actionIcon:Object(b.jsxs)(Ne.a,{"aria-label":"Like",href:"../memes/".concat(e.id),className:ae.icon,children:[Object(b.jsx)(Q.a,{}),Object(b.jsxs)("span",{children:[" ",e.likes," likes "]})]})})]},e.id)}))})};return null===F?Object(b.jsx)(fe,{dispatch:q,username:x,setUsername:f,password:k,setPassword:C,errorMessage:Y,handleLogin:K,setErrorMessage:G,setNotification:we,noteMessage:_,Notification:te,user:F}):Object(b.jsx)(Be.a,{theme:Z,children:Object(b.jsx)(se.a,{children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)("div",{id:"title",children:Object(b.jsx)("h1",{children:"MemeDump"})}),Object(b.jsx)("div",{id:"loggedInfo",children:Object(b.jsxs)("p",{children:["Logged in as: ",F.username]})}),Object(b.jsx)(te,{message:_}),Object(b.jsxs)(ue.a,{sx:{bgcolor:"white",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(rt,{handleLogout:X,logged:ee}),Object(b.jsxs)(Te.c,{children:[Object(b.jsx)(Te.a,{path:"/memes/:id",children:Object(b.jsx)(E,{memes:V})}),Object(b.jsx)(Te.a,{path:"/top",children:Object(b.jsx)(me,{})}),Object(b.jsx)(Te.a,{path:"/fresh",children:Object(b.jsx)(pe,{})}),Object(b.jsx)(Te.a,{path:"/info",children:Object(b.jsx)(re,{})}),Object(b.jsx)(Te.a,{path:"/newpost",children:Object(b.jsx)(ve,{addMeme:$,newTitle:n,setNewTitle:a,newMedia:i,setNewMedia:m})}),Object(b.jsx)(Te.a,{path:"/users/:id",children:Object(b.jsx)(Le,{users:H,memes:V,logged:ee})}),Object(b.jsxs)(Te.a,{path:"/users",children:[Object(b.jsx)("div",{id:"searchBar",children:Object(b.jsx)(oe,{})}),Object(b.jsx)(ze.a,{component:Je.a,children:Object(b.jsx)(We.a,{children:Object(b.jsx)(Ye.a,{children:H.map((function(e){return e.username.includes(N)?Object(b.jsxs)(Ge.a,{children:[Object(b.jsx)(qe.a,{children:Object(b.jsxs)("span",{children:[Object(b.jsx)(L.a,{alt:e.username,src:e.avatar}),Object(b.jsx)(j.b,{to:"../users/".concat(e.id),children:e.username})]})}),Object(b.jsxs)(qe.a,{children:[Object(b.jsx)(R.a,{}),"Activity points: ",Math.abs(3*e.memes.length)+le(e)+de(e)]}),Object(b.jsxs)(qe.a,{children:[Object(b.jsx)(z.a,{}),"posts: ",e.memes.length]}),Object(b.jsxs)(qe.a,{children:[Object(b.jsx)(Q.a,{}),"likes received: ",le(e)]}),Object(b.jsxs)(qe.a,{children:[Object(b.jsx)(D.a,{}),"comments posted: ",de(e)]}),Object(b.jsxs)(qe.a,{children:[Object(b.jsx)(Qe.a,{})," joined in ",e.joined]})]},e.id):null}))})})})]})]})]})]})})})},ct=n(77),st=n(135),it=n(136),ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},lt=Object(ct.combineReducers)({users:ot,memes:y,notification:ye,loggedIn:Se}),ut=Object(ct.createStore)(lt,Object(it.composeWithDevTools)(Object(ct.applyMiddleware)(st.a)));g.getAll().then((function(e){return ut.dispatch(w())})),ae.getAll().then((function(e){return ut.dispatch(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),ut.subscribe((function(){return console.log("store: ",ut.getState())}));var dt=ut;s.a.render(Object(b.jsx)(d.a,{store:dt,children:Object(b.jsx)(at,{})}),document.getElementById("root"))},71:function(e,t,n){}},[[192,1,2]]]);
//# sourceMappingURL=main.af60d28d.chunk.js.map